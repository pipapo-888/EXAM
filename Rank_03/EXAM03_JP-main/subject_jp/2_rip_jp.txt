RIP(1)                                 User Commands                                 RIP(1)

NAME
       rip - ネットワーク経路制御プロトコル (Routing Information Protocol) のシミュレーション課題

SYNOPSIS
       ./rip [options]

DESCRIPTION
       rip は、Routing Information Protocol（RIP）の基本的な動作を模倣する教育目的のプログラムである。

       RIP は、距離ベクトル型ルーティングプロトコルの一種であり、
       各ルータが隣接ルータと経路情報を定期的に交換しながら、
       最短経路を求める仕組みを持つ。

       この課題では、ネットワーク内のノード（ルータ）間の接続関係を入力として与え、
       各ノードが RIP のアルゴリズムに従って経路表（routing table）を構築する過程を再現する。

       典型的な RIP 動作の流れは以下の通りである。

       1. 初期化段階：
          各ルータは、自分自身のネットワーク距離を 0、他ノードへの距離を無限大として初期化する。

       2. 経路情報交換：
          各ルータは、隣接ノードと自身の経路表を交換する。

       3. 経路更新：
          他ルータから受け取った経路情報に基づき、最短距離を再計算する。
          計算式は以下の通り：
              D(A, X) = min( D(A, X), D(A, B) + D(B, X) )
          （A: 自ノード, B: 隣接ノード, X: 宛先ノード）

       4. 収束：
          すべてのノードの経路表が更新されなくなった時点で収束（convergence）とみなす。

       RIP の更新は周期的に行われるが、この課題では 1 回の情報交換後の経路表出力までを求める。

INPUT FORMAT
       入力データは、ネットワークノードと接続関係を記述したテキストファイルで与えられる。
       形式の一例を以下に示す。

           A B 2
           A C 5
           B D 1
           C D 2

       上記は、A-B 間の距離が 2、A-C 間が 5、B-D 間が 1、C-D 間が 2 であることを意味する。

OUTPUT FORMAT
       各ノードごとに、宛先ノードと最短距離を出力する。
       例：

           Routing table for A:
           A:0
           B:2
           C:4
           D:3

       この出力は、A を起点とした最短経路表を示している。

RETURN VALUE
       正常終了時に 0 を返す。
       入力エラー、メモリエラー、ファイルオープン失敗時は 1 を返す。

ERRORS
       •   入力ファイルが存在しない、または開けない。
       •   不正なフォーマット行を検出した。
       •   メモリ確保に失敗した。
       •   到達不能なノードが存在する。

EXAMPLES
       $> ./rip network.txt

       入力：
           A B 1
           B C 3
           A C 10

       出力：
           Routing table for A:
           A:0
           B:1
           C:4

NOTES
       RIP はシンプルであるが、以下の制約と課題がある。

       •   ループ（経路循環）が発生しやすく、収束が遅い。
       •   「数え上げによる無限ループ（count to infinity）」問題がある。
       •   最大ホップ数（通常 15）を超える経路は無効とされる。

       実際の RIP 実装では、以下のような改良が施されている。
       - Split Horizon（経路の逆送抑止）
       - Route Poisoning（到達不能経路の通知）
       - Triggered Updates（即時更新）

SEE ALSO
       dijkstra(3), bellman_ford(3), graph(3), fileio(3), printf(3)

───────────────────────────────────────────────
解説
───────────────────────────────────────────────
1. **課題の目的**
   - ネットワーク経路探索アルゴリズム（特に距離ベクトル方式）の理解。
   - グラフ理論とルーティング制御の基礎を体験的に学習する。
   - ファイル入力・構造体・メモリ管理・反復処理の実践。

2. **アルゴリズム概要**
   - RIP は Bellman-Ford アルゴリズムを基礎としている。
   - 各ノードが隣接ノードと距離情報を交換し、最短経路を反復的に更新する。
   - 更新式：
         D(A, X) = min(D(A, X), D(A, B) + D(B, X))
     これを全ノードが同時に行うことでネットワーク全体が収束する。

3. **実装要点**
   - ノードは構造体で表し、隣接ノードリストを持つ。
   - 経路表は連想配列（または2次元配列）で管理する。
   - 更新ループは、全ノードが変化しなくなるまで繰り返す。
   - デバッグ時は、更新ごとのテーブル差分を表示すると理解が深まる。

4. **教育的意図**
   - `rip` 課題は、アルゴリズムの「分散的な最適化」の理解を促す。
   - N_QUEENS や PERMUTATIONS が探索系アルゴリズムの訓練であるのに対し、
     RIP はネットワーク経路最適化の動的シミュレーション課題である。
   - 42 Network カリキュラムにおいて、動的プログラミング・グラフ理論・シミュレーション設計の基礎を養う位置付けとなっている。

5. **発展的考察**
   - 実装を拡張し、リアルタイム経路更新や経路ループ検出を行うことも可能。
   - Dijkstra 法との比較により、距離ベクトル法とリンクステート法の違いを理解できる。
   - JSON 形式のネットワーク入力や可視化ツールとの連携を行うと学習効果が高い。

この課題は、ネットワークアルゴリズムと構造体操作を融合させた実践型シミュレーション演習であり、
基礎的な動的アルゴリズム設計力を身につけるために極めて有効である。
