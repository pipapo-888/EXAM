FILTER(1)                             User Commands                             FILTER(1)

NAME
       filter - 指定された文字列を標準入力から除去し、同じ内容を標準出力に出力するプログラム

SYNOPSIS
       ./filter s

DESCRIPTION
       filter プログラムは、標準入力から読み込んだ内容を標準出力に書き出す。
       ただし、文字列 s のすべての出現箇所を '*' に置き換える。

       プログラムは、引数として 1 つの文字列 s を受け取る。
       入力から読み取られたすべてのテキストについて、部分文字列 s が現れるたびに、
       同じ長さの '*' 文字列で置換し、その結果を出力する。

       このプログラムは以下の仕様に従う。

       •   標準入力から読み取り、標準出力に結果を書き込む。
       •   s の各出現箇所は、s の長さと同じ個数の '*' に置換される。
       •   引数が存在しない場合、空文字列の場合、または複数の引数が与えられた場合は、エラーとして終了する。

       入力またはメモリ確保の際にエラーが発生した場合、
       プログラムは標準エラー出力（stderr）に "Error: " に続いてエラーメッセージを表示し、
       終了コード 1 で終了する。

EXAMPLES
       以下に使用例を示す。

       $> echo 'abcdefgaaaabcdefabc' | ./filter abc | cat -e
       ***defgaaa***def***$

       上記の例では、入力中の "abc" がすべて "***" に置き換えられた結果を出力している。

       誤った呼び出し例：
       $> ./filter
       （引数がないため終了コード 1）

       $> ./filter ""
       （空の引数のため終了コード 1）

       $> ./filter a b
       （複数引数のため終了コード 1）

RETURN VALUE
       成功時は 0 を返す。
       入力またはメモリ操作でエラーが発生した場合は 1 を返す。

ERRORS
       標準入力の read() に失敗した場合、または malloc() に失敗した場合に発生する。
       エラーは perror(3) または strerror(3) に準じた形式で stderr に報告される。

AUTHOR
       作成者: 42 Network Project.

SEE ALSO
       read(2), malloc(3), free(3), printf(3), perror(3)

───────────────────────────────────────────────
解説
───────────────────────────────────────────────
filter は、文字列処理と標準入出力の基礎を確認するためのシンプルな演習課題である。

1. **目的**
   - 標準入力ストリームから文字列を読み込み、指定されたパターンを検出・置換する。
   - C 言語における文字列操作、エラー処理、入出力の扱いを訓練する。

2. **主要関数**
   - `read(2)`：標準入力からデータを取得。
   - `malloc(3)` / `free(3)`：動的メモリ確保および解放。
   - `printf(3)`：標準出力への結果出力。
   - `perror(3)`：エラー表示（`errno` の内容に基づく）。

3. **実装上の要点**
   - 置換操作では単純な逐次探索を用いてもよいが、効率化には部分文字列検索（例：KMPアルゴリズム）を用いることもできる。
   - エラー時には "Error: " を明示的に付与する必要がある。
   - `stdin` と `stdout` を扱う場合、バッファリングや改行制御に注意する。

4. **評価観点**
   - エラーハンドリングの正確さ（read / malloc の戻り値確認）。
   - 動的メモリリークがないこと。
   - 空入力や長大入力に対する堅牢性。

この課題は、基本的な文字列操作・入出力の理解と、低レベル関数を安全に組み合わせる訓練として設計されている。
