N_QUEENS(1)                            User Commands                            N_QUEENS(1)

NAME
       n_queens - N クイーン問題を解くプログラム

SYNOPSIS
       ./n_queens n

DESCRIPTION
       n_queens プログラムは、クラシックな N クイーン問題を解くためのユーティリティである。

       N クイーン問題とは、N×N のチェス盤上に N 個のクイーンを配置し、
       どの 2 つのクイーンも互いに攻撃できないように配置する組み合わせを求める問題である。

       攻撃とは、同じ行、列、または対角線上に 2 つのクイーンが存在することである。

       本プログラムは、与えられた整数 n に対し、すべての解の総数を算出して出力する。

       入力 n は正の整数でなければならない。
       入力値が不正である場合は、エラーとして終了する。

       アルゴリズムとしては、典型的な再帰的バックトラッキング法を用いる。
       このアルゴリズムでは、行ごとにクイーンを 1 つずつ配置し、
       各配置が安全（衝突がない）かを逐次確認しながら再帰的に探索を行う。

       n が大きくなるほど組み合わせ数が指数関数的に増大するため、
       実装では適切な探索枝刈り（pruning）が推奨される。

RETURN VALUE
       プログラムは、標準出力に解の総数を整数値として出力し、正常終了時に 0 を返す。
       入力が不正な場合やメモリエラーが発生した場合は 1 を返す。

ERRORS
       以下の場合にエラーが発生する。

       •   引数が指定されていない場合
       •   引数が整数でない場合
       •   引数が 1 未満の場合
       •   メモリ確保に失敗した場合

EXAMPLES
       $> ./n_queens 4
       2

       上記の例では、4×4 の盤面で 2 通りの有効なクイーン配置が存在することを示している。

       $> ./n_queens 8
       92

       8 クイーン問題の総解数 92 が出力される。

IMPLEMENTATION NOTES
       N クイーン問題の探索では、通常、次の 2 つの手法が用いられる。

       1. バックトラッキング法
          - 行ごとにクイーンを 1 つ配置し、配置できない場合は前の行に戻る。
          - 時間計算量は O(N!) に近い。

       2. ビットマスク法（最適化）
          - 各列・斜線をビットで管理し、攻撃可能位置を高速に判定する。
          - 大きな N に対して高速化が可能。

       どちらの方法も再帰呼び出しを利用するのが一般的である。

SEE ALSO
       backtracking(3), recursion(3), printf(3), malloc(3), free(3)

───────────────────────────────────────────────
解説
───────────────────────────────────────────────
1. **課題の目的**
   - 再帰呼び出し・状態空間探索の理解。
   - 組み合わせ的爆発を伴う問題に対する探索枝刈りの実践。

2. **アルゴリズム概要**
   - 各行に 1 つのクイーンを配置し、同じ列・斜線上に他のクイーンが存在しないかを確認する。
   - 条件を満たす場合のみ次の行に進む。
   - 行が N に到達した場合、1 つの有効な解としてカウントする。
   - 最終的にすべての探索を終えた時点で解の総数を出力する。

3. **技術的要素**
   - 状態の記録には整数配列やビットフラグを利用できる。
   - 行列ベースの探索よりもビット演算を使う方が効率が高い。
   - メモリ使用量は O(N)、探索深さも O(N)。

4. **発展的考察**
   - 対称性削減を用いて探索数を半減できる（左右反転・回転対称の除外）。
   - 並列化（OpenMPなど）により大規模 N に対する高速化が可能。

5. **教育的意図**
   - 再帰アルゴリズムの思考過程を可視化する演習として重要。
   - 深さ優先探索と戻り処理（バックトラック）の理解を促す。
   - 42 Network のアルゴリズム課題群の中でも、再帰構造を体系的に練習できる課題である。

この課題は「状態空間探索・再帰的制御構造・効率的な探索制限」の3要素を
総合的に身につけるための典型的なバックトラッキング演習である。
